(()=>{var __webpack_modules__={567:()=>{!function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0))}connectedCallback(){this._shadow.querySelector("main").innerHTML=this.innerHTML}}const t=document.createElement("template");t.innerHTML="\n        <style>\n            main {\n                background-color: transparent;\n                color: inherit;\n                cursor: pointer;\n                font: inherit;\n                height: 3em;\n                line-height: 3em;\n                text-transform: uppercase;\n                text-align: center;\n                white-space: nowrap;\n                width:100%;\n            }\n        </style>\n        <main></main>\n    ",window.customElements.define("app-tab",e)}()},570:()=>{!function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0))}}const t=document.createElement("template");t.innerHTML='\n        <style>\n            main {\n                align-items: center;\n                display: flex;\n                flex-direction: row;\n                padding: 0.5em;\n            }\n            #barMiddle {\n                flex-grow: 1;\n                margin:0;\n                overflow: hidden;\n                padding-left: 0.5em;\n            }\n            #barRight {\n                white-space: nowrap;\n            }\n        </style>\n        <main>\n            <section id="barLeft"><slot name="left"></slot></section>\n            <section id="barMiddle"><slot name="middle"></slot></section>\n            <section id="barRight"><slot name="right"></slot></section>\n        </main>\n    ',window.customElements.define("app-bar",e)}()},551:()=>{!function(){class e extends HTMLElement{constructor(){super(),this.attachShadow({mode:"closed"}).appendChild(t.content.cloneNode(!0))}}const t=document.createElement("template");t.innerHTML="\n        <style>\n            main {\n                height: 0.70em;\n                width: 0.70em;\n                color: var(--primary-color);\n                display: inline-block;\n                border: 0.15em solid;\n                border-radius: 50%;\n                border-top-color: transparent;\n                animation: rotate 1s linear infinite;\n            }\n\n            @keyframes rotate {\n                0% {transform: rotate(0);}\n                100% {transform: rotate(360deg);}\n            }\n        </style>\n        <main/>\n    ",window.customElements.define("circular-progress",e)}()},734:()=>{!function(){class e extends HTMLElement{constructor(){super(),this.rowClickEvent=new CustomEvent("rowclick",{bubbles:!1,cancelable:!1});const e=this.attachShadow({mode:"open"});e.appendChild(t.content.cloneNode(!0)),this._header=e.getElementById("header"),this._body=e.getElementById("body")}addColumn(e){let t=document.createElement("th"),n=document.createTextNode(e);t.appendChild(n),this._header.appendChild(t)}addRow(e,t){let n=document.createElement("tr");n.id=e;for(const[,e]of Object.entries(t))n.insertAdjacentHTML("beforeend",`<td>${e}</td>`);n.addEventListener("click",function(e){e.stopPropagation();let t=this._body.querySelector(".selected");t&&t.classList.remove("selected");let n=e.target;for(;n&&"TR"!==n.nodeName;)n=n.parentNode;n&&(n.classList.add("selected"),this.dispatchEvent(new CustomEvent("rowclick",{bubbles:!1,cancelable:!1,detail:{resourceId:n.id}})))}.bind(this)),this._body.appendChild(n)}clear(){for(;this._header.firstChild;)this._header.removeChild(this._header.lastChild);this.removeAll()}removeAll(){for(;this._body.firstChild;)this._body.removeChild(this._body.lastChild)}}const t=document.createElement("template");t.innerHTML='\n        <link href="./assets/material.css" rel="stylesheet"/>\n        <style>\n            div {\n                height:100%;\n                overflow:auto;\n            }\n            table {\n                border-collapse: collapse;\n                min-width: 100%;\n                white-space: nowrap;\n            }\n            thead {\n                background-color: var(--background-color);\n                box-shadow: 0 2px 4px var(--border-color);\n                position: sticky;\n                top: 0;\n            }\n            th, td {\n                height: 56px;\n                padding: 1px 16px;\n                text-align: left;\n            }\n            tbody tr {\n                border-bottom: 1px solid var(--border-color, gray);\n                cursor:pointer;\n            }\n            tbody tr:hover, tbody tr.selected {\n                background-color: var(--hover-color, rgb(0 0 0 / 4%));\n            }\n        </style>\n        <div>\n            <table>\n                <thead>\n                    <tr id="header"></tr>\n                </thead>\n                <tbody id="body"></tbody>\n            </table>\n        </div>\n    ',window.customElements.define("data-table",e)}()},976:(e,t,n)=>{"use strict";n(644),function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0))}}const t=document.createElement("template");t.innerHTML='\n        <link rel="stylesheet" href="./assets/material.css">\n        <style>\n            main {\n                align-items: center;\n                display: flex;\n                flex-direction:row;\n                font-family: inherit;\n                font-size: .875rem;\n                padding: 0.5em;\n                text-align:right;\n                white-space: nowrap;\n            }\n            .rows {\n                margin: 0 24px;\n                flex: auto;\n            }\n        </style>\n        <main>\n            <div class="rows"><slot name="rows"></slot></div>\n            <div class="arrows"><slot name="arrows"></slot></div>\n        </main>\n    ',window.customElements.define("data-table-pagination",e)}()},877:()=>{!function(){class e extends HTMLElement{constructor(){super(),this.attachShadow({mode:"closed"}).appendChild(t.content.cloneNode(!0))}}const t=document.createElement("template");t.innerHTML='\n        <style>\n            main {\n                background-color: var(--border-color);\n                overflow: hidden;\n            }\n            .thumb {\n                height: 0.2em;\n                width: 50%;\n                background-color: var(--primary-color);\n                left: -50%;\n                position: relative;\n                animation: loading 2s ease-in 0.5s infinite;\n            }\n            @keyframes loading {\n                0% {transform:translateX(0)}\n                to {transform:translateX(400%)}\n            }\n        </style>\n        <main>\n            <div class="thumb" />\n        </main>\n    ',window.customElements.define("linear-progress",e)}()},114:()=>{!function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0))}}const t=document.createElement("template");t.innerHTML='\n        <style>\n            main {\n                padding: 0.5em 1em;\n                background-color: inherit;\n            }\n            main:hover {\n                background-color: var(--hover-color, rgba(0, 0, 0, 5%));\n            }\n            slot[name="title"] {\n                display:block;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n                overflow: hidden;\n                text-transform: capitalize;\n                color: var(--text-color-normal, black);\n            }\n            slot[name="subTitle"] {\n                font-size: smaller;\n                color: var(--text-color-disabled);\n                overflow-wrap: break-word;\n            }\n        </style>\n        <main>\n            <slot name="title"></slot>\n            <slot name="subTitle"></slot>\n        </main>\n    ',window.customElements.define("list-item",e)}()},644:()=>{!function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0))}static get observedAttributes(){return["data-icon","disabled"]}attributeChangedCallback(e,t,n){const o=this._shadow.querySelector("main");"data-icon"===e?o.innerText=n:"disabled"===e&&(null===n?o.removeAttribute("disabled"):o.setAttribute("disabled",""))}connectedCallback(){this._shadow.addEventListener("click",this._onClick)}disconnectedCallback(){this._shadow.removeEventListener("click",this._onClick)}_onClick(e){e.target.hasAttribute("disabled")&&e.stopPropagation()}}const t=document.createElement("template");t.innerHTML='\n        <link href="./assets/material.css" rel="stylesheet"/>\n        <style>\n            main {\n                padding:8px;\n                text-align:center;\n                border:0 none;\n                color: inherit;\n                background-color:transparent;\n                border-radius: 50%;\n                user-select: none;\n            }\n            main:not([disabled]):hover {\n                background-color:var(--hover-color, rgb(0 0 0 /5%));\n                cursor:pointer;\n            }\n            main[disabled] {\n                color:var(--text-color-disabled);\n            }\n        </style>\n        <main class="material-icons"/>\n    ',window.customElements.define("round-button",e)}()},648:()=>{!function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0))}connectedCallback(){}}const t=document.createElement("template");t.innerHTML='\n        <style>\n            main {\n                background-color: white;\n                border-radius: 4px;\n                box-shadow: 0px 11px 15px -7px rgb(0 0 0 / 20%), 0px 24px 38px 3px rgb(0 0 0 / 14%), 0px 9px 46px 8px rgb(0 0 0 / 12%);\n                bottom: 1em;\n                margin: 0 1em;\n                min-width: 344px;\n                position: absolute;\n            }\n            .overlay {\n                align-items: center;\n                background-color: rgba(0,0,0,85%);\n                color: white;\n                display:flex;\n                flex-direction: row;\n                font-family: Roboto, Arial, monospace;\n                min-height: 48px;\n                padding: 0 1em;\n            }\n            #message {\n                flex-grow: 1;\n                overflow: hidden;\n                padding: 0 1em;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n            slot[name="right"] {\n                margin-left: 1em;\n            }\n            @media (max-width:480px){\n                main {\n                    min-width: unset;\n                    width: calc(100% - 2em);\n                }\n            }\n        </style>\n        <main>\n            <div class="overlay">\n                <div id="message"><slot></slot></div>\n                <slot name="right"></slot>\n            </div>\n        </main>\n    ',window.customElements.define("snack-bars",e)}()},484:()=>{!function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0))}connectedCallback(){this._shadow.querySelector("main").onclick=e=>{"APP-TAB"===e.target.nodeName&&(this.select(e.target.id),e.stopPropagation())}}select(e){const t=this._shadow.querySelector("slot").assignedElements().filter((t=>t.id===e))[0];t&&(this._shadow.querySelector("slot").assignedElements().forEach((e=>e.removeAttribute("selected"))),t.setAttribute("selected","selected"),this.dispatchEvent(new CustomEvent("click",{bubbles:!1,cancelable:!1,detail:{tab:t}})))}}const t=document.createElement("template");t.innerHTML="\n        <style>\n            main {\n                display:flex;\n                flex-direction:row;\n                flex-wrap: nowrap;\n            }\n            ::slotted(app-tab) {\n                flex-grow:1;\n                border-bottom: 2px solid transparent;\n                font-size: smaller;\n            }\n            ::slotted(app-tab:hover) {\n                background-color:var(--hover-color, rgba(0, 0, 0, 5%));\n            }\n            ::slotted(app-tab[selected]) {\n                border-bottom-color: var(--primary-color, #000);\n                font-weight: bold;\n                color: var(--primary-color, #000);\n            }\n        </style>\n        <main><slot></slot></main>\n    ",window.customElements.define("tab-bar",e)}()},165:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var _components_AppBar_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(570),_components_AppBar_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_components_AppBar_js__WEBPACK_IMPORTED_MODULE_0__),_components_DataTable_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(734),_components_DataTable_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_components_DataTable_js__WEBPACK_IMPORTED_MODULE_1__),_components_DataTablePagination_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(976),_components_LinearProgress_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(877),_components_LinearProgress_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_components_LinearProgress_js__WEBPACK_IMPORTED_MODULE_3__),_fhirSearch_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(852),_services_Fhir_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(323),_services_Snackbars_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(156);(function(){class FhirBundle extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(template.content.cloneNode(!0)),this._resourceType=null,this._skip=0,this._pageSize=20,this._count=null,this._columns=null,this._filters=[],this._page=null}connectedCallback(){this._shadow.getElementById("help").addEventListener("click",(()=>{window.open(this._resourceType.profile,"FhirBrowserHelp")})),this._shadow.querySelector("data-table-pagination").addEventListener("click",(e=>{const{target:t}=e;t.matches("round-button")&&this.loadPage(t.dataset)})),this._shadow.getElementById("table").addEventListener("rowclick",(({detail:e})=>{location.hash=`#${this._resourceType.type}/${e.resourceId}`}));const e=this._shadow.getElementById("search");this._shadow.getElementById("searchToggle").addEventListener("click",(()=>{e.classList.toggle("hidden")})),e.addEventListener("apply",(({detail:t})=>{this._filters=t.parameters,this.loadPage(),window.matchMedia("(max-width: 480px)").matches&&e.classList.add("hidden")})),this._shadow.getElementById("copy").addEventListener("click",(()=>{navigator.clipboard.writeText(JSON.stringify(this._page)).then((function(){_services_Snackbars_js__WEBPACK_IMPORTED_MODULE_5__.h.show("Copying to clipboard was successful")}),(function(e){console.error("Async: Could not copy text: ",e)}))})),this._shadow.getElementById("download").addEventListener("click",(()=>{const e=`${this._resourceType.type}-${this._skip}`,t=new File([JSON.stringify(this._page)],e,{type:"data:text/json;charset=utf-8"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=`${e}.json`,this._shadow.appendChild(o),o.click(),this._shadow.removeChild(o),window.URL.revokeObjectURL(n)}))}load(e){if(e===this._resourceType)return;this._resourceType=e,this._filters=[],this._shadow.getElementById("search").metadata=e,this._columns=[],"Binary"===e.type&&this._columns.push({label:"Content type",expression:"contentType",type:"string"}),this._columns.push({label:"Id",expression:"id",type:"string"},{label:"Last updated",expression:"meta.lastUpdated",type:"date"});const t=this._shadow.getElementById("table");t.clear(),this._columns.forEach((e=>{t.addColumn(e.label)})),this._shadow.getElementById("title").innerText=e.type,this.loadPage()}loadPage(e={url:`${_services_Fhir_js__WEBPACK_IMPORTED_MODULE_6__.t.server.url}/${this._resourceType.type}?_count=${this._pageSize}&_summary=true`}){switch(e.relation){case"previous":this._skip-=this._pageSize;break;case"next":this._skip+=this._pageSize;break;case"last":this._skip=Math.floor(this._count/this._pageSize)*this._pageSize;break;default:this._skip=0}this._shadow.getElementById("table").removeAll();const t=this._shadow.querySelector("linear-progress");t.style.visibility="visible",_services_Fhir_js__WEBPACK_IMPORTED_MODULE_6__.t.searchByLink(e.url,this._filters).then((n=>{this._page=n,this.parsePage(n),t.style.visibility="hidden",void 0===e.relation?n.total?(this._count=n.total,this.fillPaginationRange(),this._shadow.getElementById("paginationCount").innerHTML=this._count):this.getCount():this.fillPaginationRange()}))}getCount(){const e=this._shadow.getElementById("paginationCount");e.innerHTML="<circular-progress></circular-progress>",_services_Fhir_js__WEBPACK_IMPORTED_MODULE_6__.t.searchCount(this._resourceType.type,this._filters).then((({total:t})=>{this._count=t,this.fillPaginationRange(),e.innerHTML=t}))}fillPaginationRange(){const e=this._shadow.getElementById("paginationRange");let t="0";0!=this._count&&(t=`${this._skip+1}-${Math.min(this._skip+this._pageSize,this._count)}`),e.innerText=t}parsePage(data){if(data.entry){const dataTable=this._shadow.getElementById("table");let value="";data.entry.forEach((entry=>{if(entry.resource&&entry.resource.resourceType==this._resourceType.type){let row={};this._columns.forEach((column=>{value=eval("entry.resource."+column.expression),row[column.label]=value})),dataTable.addRow(entry.resource.id,row)}}));const buttons={first:this._shadow.getElementById("paginationFirst"),previous:this._shadow.getElementById("paginationPrevious"),next:this._shadow.getElementById("paginationNext"),last:this._shadow.getElementById("paginationLast")};for(const[e,t]of Object.entries(buttons))t.setAttribute("disabled",""),t.removeAttribute("data-relation"),t.removeAttribute("data-url");let button=null;data.link.forEach((e=>{const t="prev"===e.relation?"previous":e.relation;(button=buttons[t])&&(button.removeAttribute("disabled"),button.setAttribute("data-relation",t),button.setAttribute("data-url",e.url))}))}}}const template=document.createElement("template");template.innerHTML='\n        <link href="./assets/material.css" rel="stylesheet"/>\n        <style>\n            #wrapper {\n                display:flex;\n                flex-direction:row;\n                height:100%;\n                overflow: hidden;\n            }\n            #bundleCnt {\n                display:flex;\n                flex-direction:column;\n                height:100%;\n                flex: auto;\n                width: 0;\n            }\n            main {\n                flex:1 1 auto;\n                height:0;\n                border-top: 1px solid var(--border-color);\n                border-bottom: 1px solid var(--border-color);\n            }\n            #title {\n                margin:0;\n                overflow:hidden;\n                text-overflow:ellipsis;\n            }\n            linear-progress {\n                position: relative;\n                top: 0;\n            }\n            #table {\n                flex: auto;\n            }\n            fhir-search {\n                border-left: 1px solid var(--border-color);\n                flex: none;\n                transition: all 0.3s;\n                width: 400px;\n            }\n            fhir-search.hidden {\n                transition: all 0.3s;\n                margin-right: -400px;\n            }\n            @media (max-width:480px){\n                fhir-search {\n                    background-color: var(--background-color, rgb(255,255,255));\n                    position: relative;\n                    width:100%;\n                }\n                fhir-search.hidden {\n                    margin-right: -100%;\n                }\n            }\n        </style>\n        <div id="wrapper">\n            <div id="bundleCnt">\n                <header>\n                    <app-bar>\n                        <h3 slot="middle" id="title"></h3>\n                        <round-button slot="right" id="copy" title="Copy to clipboard" data-icon="content_copy"></round-button>\n                        <round-button slot="right" id="download" title="Download" data-icon="download"></round-button>\n                        <round-button slot="right" id="searchToggle" title="Search" data-icon="search"></round-button>\n                        <round-button slot="right" id="help" title="Help" data-icon="help"></round-button>\n                    </app-bar>\n                    <linear-progress></linear-progress>\n                </header>\n                <main>\n                    <data-table id="table"></data-table>\n                </main>\n                <footer>\n                    <data-table-pagination id="pagination">\n                        <div slot="rows"><span id="paginationRange"></span> of <span id="paginationCount"></span></div>\n                        <round-button slot="arrows" id="paginationFirst" title="first" data-icon="first_page" disabled></round-button>\n                        <round-button slot="arrows" id="paginationPrevious" title="previous" data-icon="chevron_left" disabled></round-button>\n                        <round-button slot="arrows" id="paginationNext" title="next" data-icon="chevron_right" disabled></round-button>\n                        <round-button slot="arrows" id="paginationLast" title="last" data-icon="last_page" disabled/>\n                    </data-table-pagination>\n                </footer>\n            </div>\n            <fhir-search id="search" class="hidden"></fhir-search>\n        </div>\n    ',window.customElements.define("fhir-bundle",FhirBundle)})()},817:()=>{!function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0))}connectedCallback(){const e=this._shadow.getElementById("text");function t(t){this.dispatchEvent(new CustomEvent("filterChanged",{bubbles:!1,cancelable:!1,detail:{text:e.value}}))}this._shadow.getElementById("clear").addEventListener("click",(()=>{e.value&&(e.value="",t.call(this))})),this._shadow.querySelector("main").addEventListener("mousedown",(t=>{t.preventDefault(),t.stopPropagation(),e.focus()})),e.addEventListener("input",t.bind(this))}clear(){this._shadow.getElementById("clear").click()}}const t=document.createElement("template");t.innerHTML='\n        <link href="./assets/material.css" rel="stylesheet"/>\n        <style>\n            main {\n                display: flex;\n                padding: 0.7em;\n                font-size: smaller;\n            }\n            main:focus-within {\n                border-bottom-color: var(--primary-color, black);\n            }\n            #text {\n                background: none;\n                border: 0 none;\n                color: var(--text-color-normal);\n                flex: 1 1 auto;\n                font-family: inherit;\n                font-size: inherit;\n            }\n            #text:focus {\n                outline: none;\n            }\n            #clear {\n                cursor: pointer;\n                font-size: inherit;\n                line-height: unset;\n            }\n        </style>\n        <main>\n            <input id="text" type="text" placeholder="Type to filter"/>\n            <i id="clear" class="material-icons" title="clear">close</i>\n        </main>\n    ',window.customElements.define("fhir-resource-types-filter",e)}()},972:()=>{!function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0))}connectedCallback(){}clear(){const e=this._shadow.getElementById("content");e.scrollTo(0,0),e.innerHTML="Loading...",e.style.cursor="wait"}set source(e){const t=this._shadow.getElementById("content"),n=new XMLSerializer;t.scrollTo(0,0),t.innerText=n.serializeToString(e),t.style.cursor="default"}}const t=document.createElement("template");t.innerHTML='\n        <link rel="stylesheet" href="./assets/material.css">\n        <style>\n            main {\n                display:flex;\n                flex-direction:column;\n                height:100%;\n            }\n            #content {\n                box-shadow: inset 0px 2px 4px 0px var(--border-color);\n                color: var(--text-color-normal, black);\n                flex: 1 1 auto;\n                font-family: monospace;\n                height:0;\n                overflow: auto;\n                padding: 1em;\n                white-space: pre-wrap;\n                margin:0;\n            }\n            @media (max-width:480px){\n                #content {\n                    line-height: 2em;\n                }\n            }\n        </style>\n        <main>\n            <pre id="content"></pre>\n        </main>\n    ',window.customElements.define("fhir-resource-xml",e)}()},852:(e,t,n)=>{"use strict";n(644),n(881),n(590),n(566),n(831),customElements.define("fhir-search-item",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(o.content.cloneNode(!0))}connectedCallback(){}clear(){this._shadow.querySelectorAll("fhir-search-text, fhir-search-date, fhir-search-modifier, fhir-search-prefix").forEach((e=>e.value=""))}get value(){let e;switch(this._search.type){case"token":let t="";const n=this._shadow.querySelector('fhir-search-text[data-type="system"]');return n?.value&&(t=`${n.value}|`),e=this._shadow.querySelector("fhir-search-text:not([data-type])"),e?.value&&(t+=e.value),t?{name:this._search.name,value:t}:null;case"string":case"reference":if(e=this._shadow.querySelector("fhir-search-text"),e?.value){let t=this._search.name;const n=this._shadow.querySelector("fhir-search-modifier");return n?.value&&(t+=`:${n.value}`),{name:t,value:e.value}}break;case"date":case"datetime":if(e=this._shadow.querySelector("fhir-search-date"),e?.value){let t=e.value;const n=this._shadow.querySelector("fhir-search-prefix");return n?.value&&(t=n.value+t),{name:this._search.name,value:t}}}return null}init(e){function t(e,t){let o=document.createElement("fhir-search-text");o.setAttribute("name",e.name),t&&o.setAttribute("placeholder",t),n.appendChild(o)}if("_format"===e.name)return!1;this._search=e,this._shadow.querySelector("legend").innerText=e.name,this._shadow.querySelector("span").innerText=e.documentation||"";const n=this._shadow.querySelector("fieldset");let o;if(console.log(`${this._search.name}:${this._search.type}`),"_id"==e.name)t(e);else if("_filter"==e.name)t(e);else switch(e.type){case"token":!function(e){let t=document.createElement("fhir-search-text");t.setAttribute("placeholder","System"),t.setAttribute("data-type","system"),t.setAttribute("name",e.name),n.appendChild(t)}(e),t(e,"code");break;case"string":case"reference":!function(e){let t=document.createElement("fhir-search-modifier");t.setAttribute("data-name",e.name),n.appendChild(t)}(e),t(e);break;case"date":case"datetime":o=document.createElement("fhir-search-prefix"),o.setAttribute("data-name",e.name),n.appendChild(o),o=document.createElement("fhir-search-date"),o.setAttribute("name",e.name),n.appendChild(o);break;default:return!1}return!0}});const o=document.createElement("template");o.innerHTML="\n    <style>\n        main {\n            margin-bottom: 1em;\n        }\n        fieldset {\n            display: flex;\n            flex-direction: row;\n            border: none;\n            padding: 0;\n            gap: 1em;\n        }\n        fieldset:focus-within legend {\n            font-weight: bold;\n            color: var(--primary-color);\n        }\n        fhir-search-text,\n        fhir-search-date {\n            flex:auto;\n        }\n        span {\n            color: var(--text-color-disabled);\n            font-size: small;\n            display: -webkit-box;\n            text-overflow: ellipsis;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n            overflow:hidden;\n            padding-top: 2px;\n        }\n    </style>\n    <main>\n        <fieldset>\n            <legend inert></legend>\n            <slot></slot>\n        </fieldset>\n        <span inert></span>\n    </main>\n",customElements.define("fhir-search",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(a.content.cloneNode(!0))}connectedCallback(){const e=this._shadow.querySelector("main");this._shadow.getElementById("back").addEventListener("click",(()=>{this.classList.add("hidden")})),this._shadow.getElementById("clear").addEventListener("click",(()=>{e.querySelectorAll("fhir-search-item").forEach((e=>e.clear()))})),this._shadow.getElementById("help").addEventListener("click",(()=>{window.open("https://hl7.org/fhir/search.html","FhirBrowserHelp")})),this._shadow.getElementById("apply").addEventListener("click",(()=>{const t=[];e.querySelectorAll("fhir-search-item").forEach((e=>{let n=e.value;n&&t.push(n)})),this.dispatchEvent(new CustomEvent("apply",{bubbles:!1,cancelable:!1,detail:{parameters:t}}))}))}set metadata(e){const t=this._shadow.querySelector("main");for(t.scrollTop=0;t.firstChild;)t.removeChild(t.lastChild);e.searchParam&&e.searchParam.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)).forEach((e=>{const n=document.createElement("fhir-search-item");n.init(e)&&t.appendChild(n)}))}});const a=document.createElement("template");a.innerHTML='\n    <link rel="stylesheet" href="./assets/material.css">\n    <style>\n        #wrapper {\n            background-color: rgba(255,255,255,4%);\n            color:var(--text-color-normal, white);\n            display:flex;\n            flex-direction: column;\n            font-family: Roboto, Arial, monospace;\n            height: 100%;\n        }\n        header {\n            padding-bottom: 3px;\n        }\n        header h3 {\n            margin:0;\n        }\n        #back {\n            display: none;\n        }\n        main {\n            box-shadow: inset 0px 2px 4px 0px var(--border-color);\n            border-bottom: 1px solid var(--border-color);\n            border-top: 1px solid var(--border-color);\n            overflow: auto;\n            flex: 1 1 auto;\n            height: 0;\n            padding: 1em;\n        }\n        footer {\n            padding: 9px 16px;\n            text-align: center;\n            overflow: hidden;\n        }\n        footer input[type=button] {\n            background: none;\n            border: 1px solid var(--primary-color);\n            border-radius: 4px;\n            color: var(--primary-color);\n            cursor: pointer;\n            font: inherit;\n            padding: 5px 16px;\n            text-transform: uppercase;\n        }\n        footer input[type=button]:hover {\n            background-color: var(--hover-color);\n        }\n        @media (max-width:480px){\n            .surface {\n                left:0;\n                right: unset;\n                width:100%;\n                max-width: unset;\n                max-height: unset;\n            }\n            .overlay {\n                background-color: transparent;\n            }\n            #back {\n                display: unset;\n            }\n        }\n    </style>\n    <div id="wrapper">\n        <header>\n            <app-bar id="header">\n                <round-button slot="left" id="back" title="back" data-icon="arrow_back"></round-button>\n                <h3 id="title" slot="middle">Search</h3>\n                <round-button id="clear" title="Clear" data-icon="clear_all" slot="right"></round-button>\n                <round-button id="help" title="Help" data-icon="help" slot="right"></round-button>\n            </app-bar>\n        </header>\n        <main></main>\n        <footer>\n            <input type="button" id="apply" value="Apply"></input>\n        </footer>\n    </main>\n'},831:()=>{customElements.define("fhir-search-date",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(e.content.cloneNode(!0))}connectedCallback(){}get value(){const e=this._shadow.querySelector('input[type="date"]');if(e.value){const t=this._shadow.querySelector('input[type="time"]');let n=new Date(`${e.value}T${t.value||"00:00"}`);return new Date(n.getTime()).toISOString()}return null}set value(e){this._shadow.querySelector('input[type="date"]').value="",this._shadow.querySelector('input[type="time"]').value=""}});const e=document.createElement("template");e.innerHTML='\n    <style>\n        main {\n            background-color: var(--hover-color);\n            border-bottom: 1px solid gray;\n            display: flex;\n            flex-direction: row;\n            flex-wrap: wrap;\n        }\n        main:focus-within,\n        main:focus-within input {\n            border-color: var(--primary-color);\n        }\n        input {\n            background: none;\n            border: 0 none;\n            border-bottom: 1px solid transparent;\n            color: var(--text-color-normal);\n            flex: auto;\n            font: inherit;\n            padding: 4px 5px;\n\n            max-width: 120px;\n            min-width: 100px;\n        }\n        input:focus {\n            outline: none;\n        }\n    </style>\n    <main>\n        <input type="date"></input>\n        <input type="time"></input>\n    </main>\n'},881:()=>{customElements.define("fhir-search-modifier",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(e.content.cloneNode(!0))}connectedCallback(){}get value(){return this._shadow.querySelector("input").value}set value(e){this._shadow.querySelector("input").value=e}});const e=document.createElement("template");e.innerHTML='\n    <style>\n        main {\n            background-color: var(--hover-color);\n            border-bottom: 1px solid gray;\n        }\n        main:focus-within {\n            border-color: var(--primary-color);\n        }\n        input {\n            background: none;\n            border: 0 none;\n            border-bottom: 1px solid transparent;\n            color: var(--text-color-normal);\n            flex: auto;\n            font: inherit;\n            padding: 5px;\n            width: 90px;\n        }\n        input:focus {\n            outline: none;\n            border-color: var(--primary-color);\n        }\n    </style>\n    <main>\n        <input placeholder="Modifier" list="FhirSearchFieldModifierList"></input>\n        <datalist id="FhirSearchFieldModifierList">\n            <option value="contains"></option>\n            <option value="exact"></option>\n        </datalist>\n    </main>\n'},590:()=>{customElements.define("fhir-search-prefix",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(e.content.cloneNode(!0))}connectedCallback(){}get value(){return this._shadow.querySelector("input").value}set value(e){this._shadow.querySelector("input").value=e}});const e=document.createElement("template");e.innerHTML='\n    <style>\n        main {\n            background-color: var(--hover-color);\n            border-bottom: 1px solid gray;\n        }\n        main:focus-within {\n            border-color: var(--primary-color);\n        }\n        input {\n            background: none;\n            border: 0 none;\n            border-bottom: 1px solid transparent;\n            color: var(--text-color-normal);\n            flex: auto;\n            font: inherit;\n            padding: 5px;\n            width: 90px;\n        }\n        input:focus {\n            outline: none;\n            border-color: var(--primary-color);\n        }\n    </style>\n    <main>\n        <input placeholder="Prefix" list="FhirSearchPrefixList"></input>\n        <datalist id="FhirSearchPrefixList">\n            <option value="eq">Is equal to</option>\n            <option value="ne">is not equal to</option>\n            <option value="gt">is greater than</option>\n            <option value="lt">is less than</option>\n            <option value="ge">is greater or equal to</option>\n            <option value="le">is less or equal to</option>\n        </datalist>\n    </div>\n'},566:()=>{customElements.define("fhir-search-text",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(e.content.cloneNode(!0))}connectedCallback(){let e=this.getAttribute("placeholder");e&&this._shadow.querySelector("input").setAttribute("placeholder",e)}get value(){return this._shadow.querySelector("input").value}set value(e){this._shadow.querySelector("input").value=e}});const e=document.createElement("template");e.innerHTML='\n    <style>\n        main {\n            background-color: var(--hover-color);\n            border-bottom: 1px solid gray;\n            display: flex;\n            flex\n        }\n        main:focus-within {\n            border-color: var(--primary-color);\n        }\n        input {\n            background: none;\n            border: 0 none;\n            border-bottom: 1px solid transparent;\n            color: var(--text-color-normal);\n            flex: auto;\n            font: inherit;\n            padding: 5px;\n        }\n        input:focus {\n            outline: none;\n            border-color: var(--primary-color);\n        }\n    </style>\n    <main>\n        <input type="text"></input>\n    </main>\n'},323:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});class o{static{this._server=null}static set server(e){this._server=e}static get server(){return this._server}static async capabilities(e="full"){const t=new URL(`${this._server.url}/metadata`);return t.searchParams.set("mode",e),t.searchParams.set("_format","json"),(await fetch(t,{cache:"reload",headers:this._server.headers})).json()}static async read(e,t){const n=new URL(`${this._server.url}/${e}/${t}`);return n.searchParams.set("_format","json"),(await fetch(n,{headers:this._server.headers})).json()}static async readXml(e,t){const n=new URL(`${this._server.url}/${e}/${t}`);return n.searchParams.set("_format","xml"),n.searchParams.set("_pretty","true"),(await fetch(n,{headers:this._server.headers})).text()}static async searchByLink(e,t=[]){const n=new URL(e);return n.searchParams.set("_summary","true"),n.searchParams.set("_format","json"),t.forEach((e=>{n.searchParams.set(e.name,e.value)})),(await fetch(n,{headers:this._server.headers})).json()}static async searchCount(e,t=[]){const n=new URL(`${this._server.url}/${e}`);return n.searchParams.set("_summary","count"),n.searchParams.set("_format","json"),t.forEach((e=>{n.searchParams.set(e.name,e.value)})),(await fetch(n,{headers:this._server.headers})).json()}}},156:(e,t,n)=>{"use strict";n.d(t,{h:()=>o}),n(648);class o{static{this._container=document.body}static set container(e){this._container=e}static show(e,t,n=4e3){let o=document.createElement("snack-bars");o.appendChild(document.createTextNode(e)),t&&(t.setAttribute("slot","right"),o.appendChild(t)),this._container.appendChild(o),setTimeout((()=>{o.remove()}),n)}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{"use strict";__webpack_require__(570),__webpack_require__(551),__webpack_require__(567),__webpack_require__(484),__webpack_require__(817),function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0)),this._metadata=null,this._resourceType=null}connectedCallback(){this._shadow.getElementById("filter").addEventListener("filterChanged",(({detail:e})=>{const t=this._shadow.getElementById("list").firstElementChild,n=e.text.toLowerCase();t.childNodes.forEach((e=>{e.hidden=!e.innerText.toLowerCase().startsWith(n)}))})),this._shadow.getElementById("list").onclick=({target:e})=>{if("LI"===e.nodeName){let t=this._shadow.querySelector(".selected");t&&t.classList.remove("selected"),e.classList.add("selected"),this._resourceType=e.dataset.type,location.hash=`#${e.dataset.type}`}}}clear(){this._shadow.getElementById("filter").clear();const e=this._shadow.getElementById("list");e.scrollTop=0;const t=e.firstElementChild;for(;t.firstChild;)t.removeChild(t.lastChild)}get value(){return this._resourceType}set value(e){if(e!=this._resourceType){const t=this._shadow.getElementById("list").firstElementChild,n=Array.from(t.childNodes).filter((t=>t.dataset.type===e));if(n?.length){this._resourceType=e;let t=this._shadow.querySelector(".selected");t&&t.classList.remove("selected"),n[0].classList.add("selected"),n[0].scrollIntoView()}}}set metadata(e){this._metadata=e,this.clear();const t=this._shadow.getElementById("list").firstElementChild;e.rest[0].resource.forEach((e=>{const n=document.createElement("li");n.setAttribute("data-type",e.type),n.innerHTML=e.type,t.appendChild(n)}))}}const t=document.createElement("template");t.innerHTML='\n        <link href="./assets/material.css" rel="stylesheet"/>\n        <style>\n            main {\n                display: flex;\n                flex-direction: column;\n                height:100%;\n            }\n            #list {\n                box-shadow: inset 0px 2px 4px 0px var(--border-color);\n                flex:1 1 auto;\n                height:0;\n                overflow:auto;\n            }\n            ul {\n                list-style: none;\n                padding: 0;\n                margin: 0;\n            }\n            li {\n                cursor: pointer;\n                padding: 0.3em 1em;\n                line-height: 2em;\n            }\n            li:hover, li.selected {\n                background-color:var(--hover-color, lightgray);\n            }\n        </style>\n        <main>\n            <fhir-resource-types-filter id="filter"></fhir-resource-types-filter>\n            <div id="list"><ul></ul></div>\n        </main>\n    ',window.customElements.define("fhir-resource-types",e)}(),__webpack_require__(114),function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0))}clear(){const e=this._shadow.querySelector("main");for(;e.firstChild;)e.removeChild(e.lastChild)}set metadata(e){this.clear();const t=this._shadow.querySelector("main");function n(e,n){if(void 0===n)return;const o=document.createElement("list-item"),a=document.createElement("span");a.appendChild(document.createTextNode(e)),a.slot="title",o.appendChild(a);const r=document.createElement("span");r.appendChild(document.createTextNode(n)),r.slot="subTitle",o.appendChild(r),t.appendChild(o)}n("copyright",e.copyright),n("description",e.description),n("fhirVersion",e.fhirVersion),e.implementation&&(n("implementation description",e.implementation.description),n("implementation name",e.implementation.name),n("implementation url",e.implementation.url)),n("language",e.language),n("name",e.name),n("publisher",e.publisher),e.software&&(n("software name",e.software.name),n("software version",e.software.version),n("software release date",e.software.releaseDate))}}const t=document.createElement("template");t.innerHTML="\n        <style>\n            main {\n                height: 100%;\n                overflow-y: auto;\n            }\n        </style>\n        <main/>\n    ",window.customElements.define("fhir-server-details",e)}(),function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0)),this._metadata=null}connectedCallback(){this._shadow.querySelector("tab-bar").addEventListener("click",(({detail:e})=>{this._shadow.getElementById(e.tab.dataset.target).scrollIntoView({behavior:window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth",block:"start",inline:"start"})}))}clear(){this._shadow.getElementById("resourceTypes").clear(),this._shadow.getElementById("serverDetails").clear()}select(e){this._shadow.getElementById("resourceTypes").value=e}set metadata(e){this.clear(),this._shadow.getElementById("resourceTypes").metadata=e,this._shadow.getElementById("serverDetails").metadata=e}}const t=document.createElement("template");t.innerHTML='\n        <style>\n            main {\n                display:flex;\n                flex-direction: column;\n                height : 100%;\n                overflow:hidden;\n                position:relative;\n            }\n            tab-bar {\n                border-bottom:1px solid var(--border-color, gray);\n            }\n            #tabsBody {\n                flex: auto;\n                height: 0;\n                overflow: hidden;\n                position: relative;\n                block-size: 100%;\n                display: grid;\n                grid-auto-flow: column;\n                grid-auto-columns: 100%;\n                grid-auto-rows: 100%;\n            }\n        </style>\n        <main>\n            <tab-bar>\n                <app-tab id="tabResources" data-target="resourceTypes" selected>Resource Types</app-tab>\n                <app-tab id="tabDetails" data-target="serverDetails">Details</app-tab>\n            </tab-bar>\n            <div id="tabsBody">\n                <fhir-resource-types id="resourceTypes"></fhir-resource-types>\n                <fhir-server-details id="serverDetails"></fhir-server-details>\n            </div>\n        </main>\n    ',window.customElements.define("fhir-metadata",e)}(),function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0))}}const t=document.createElement("template");t.innerHTML='\n        <style>\n            main {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n            }\n            ::slotted(*) {\n                flex: 1 1 auto;\n                height: 0;\n            }\n            circular-progress {\n                font-size: 2em;\n                text-align: center;\n                padding-top: 1em;\n            }\n        </style>\n        <main>\n            <circular-progress id="waiting" hidden></circular-progress>\n            <slot></slot>\n        </main>\n    ',window.customElements.define("app-left-panel",e)}();var e=__webpack_require__(156),t=(__webpack_require__(165),__webpack_require__(644),__webpack_require__(323));!function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(n.content.cloneNode(!0))}connectedCallback(){this._shadow.getElementById("content").addEventListener("click",(({target:e})=>{const t=e.closest("dt");t&&(t.classList.contains("array")||t.classList.contains("object"))&&t.classList.toggle("collapsed")}))}clear(){const e=this._shadow.getElementById("content");e.scrollTo(0,0),e.innerHTML="Loading...",e.style.cursor="wait"}set source(e){const n=this._shadow.getElementById("content");n.scrollTo(0,0),n.innerHTML="",n.appendChild(document.createTextNode("{")),n.appendChild(function e(n){let o=document.createElement("dl");for(const[a,r]of Object.entries(n)){const n=document.createElement("dt"),s=document.createElement("span");s.className="key",s.innerText=a,n.appendChild(s);const i=document.createElement("span");if(i.classList.add("value"),null===r)i.innerText="null";else if("string"==typeof r)if(i.classList.add("string"),"reference"===a){const e=document.createElement("a");let n=r;n.startsWith(t.t.server.url)&&(n=n.slice(t.t.server.url.length+1)),e.setAttribute("href",`#${n}`),e.appendChild(document.createTextNode(r)),i.appendChild(e)}else i.innerText=r;else"object"==typeof r?(n.classList.add(Array.isArray(r)?"array":"object"),i.appendChild(e(r))):i.innerText=r;n.appendChild(i),o.appendChild(n)}return o}(e)),n.appendChild(document.createTextNode("}")),n.style.cursor="default"}}const n=document.createElement("template");n.innerHTML="\n        <link rel=\"stylesheet\" href=\"./assets/material.css\">\n        <style>\n            main {\n                --indent: 1.3em;\n                display:flex;\n                flex-direction:column;\n                height:100%;\n            }\n            #content {\n                box-shadow: inset 0px 2px 4px 0px var(--border-color);\n                color: var(--text-color-normal, black);\n                flex: 1 1 auto;\n                font-family: monospace;\n                height:0;\n                overflow: auto;\n                padding: 1em;\n                white-space: nowrap;\n            }\n            dl {\n                margin: 0;\n                padding-left: var(--indent);\n            }\n            dt {\n                list-style-type: none;\n            }\n            span {\n                color: var(--json-viewer-values-color, black);\n                cursor: inherit;\n            }\n            span.key {\n                color: var(--json-viewer-properties-color, black);\n            }\n            span.key::before {\n                content: '\"';\n            }\n            span.key::after {\n                content: '\": ';\n            }\n            dt.array > span.value > dl > dt > span.key::before {\n                content: '';\n            }\n            dt.array > span.value > dl > dt > span.key::after {\n                content: ': ';\n            }\n            span.value.string::before {\n                content: '\"';\n            }\n            span.value.string::after {\n                content: '\"';\n            }\n            dt.array > span.value::before {\n                content: '[';\n            }\n            dt.array > span.value::after {\n                content: ']';\n            }\n            dt.object > span.value::before {\n                content: '{';\n            }\n            dt.object > span.value::after {\n                content: '}';\n            }\n            dt,\n            dt.array > span.value::after,\n            dt.object > span.value::after {\n                padding-left: var(--indent);\n            }\n            dt.array,\n            dt.object {\n                cursor: pointer;\n                padding-left: 0;\n            }\n            dt.array::before,\n            dt.object::before {\n                content: 'expand_less ';\n                font-family: 'Material Icons';\n                font-weight: bold;\n                line-height: inherit;\n                vertical-align: middle;\n                color: var(--text-color-disabled, black);\n            }\n            dt:not(:last-child)::after {\n                content: \",\";\n            }\n            dt.collapsed::before {\n                content: 'expand_more ';\n            }\n            dt.collapsed > span dl {\n                display: none;\n            }\n            dt.array.collapsed span.value::after {\n                content: '...]';\n                padding-left: 0;\n            }\n            dt.object.collapsed span.value::after {\n                content: '...}';\n                padding-left: 0;\n            }\n            @media (max-width:480px){\n                #content {\n                    line-height: 2em;\n                }\n            }\n        </style>\n        <main>\n            <div id=\"content\"></div>\n        </main>\n    ",window.customElements.define("fhir-resource-json",e)}(),__webpack_require__(972),function(){class n extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(o.content.cloneNode(!0)),this._resourceType=null,this._resourceId=null,this._xmlLoaded=!1}connectedCallback(){this._shadow.getElementById("back").addEventListener("click",(()=>{location.hash=`#${this._resourceType.type}`})),this._shadow.getElementById("help").addEventListener("click",(()=>{window.open(`${this._resourceType.profile}#resource`,"FhirBrowserHelp")})),this._shadow.getElementById("download").addEventListener("click",(()=>{const e=new File([JSON.stringify(this._resource)],this._resource.id,{type:"data:text/json;charset=utf-8"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=`${this._resourceType.type}#${e.name}.json`,this._shadow.appendChild(n),n.click(),this._shadow.removeChild(n),window.URL.revokeObjectURL(t)})),this._shadow.getElementById("copy").addEventListener("click",(()=>{navigator.clipboard.writeText(JSON.stringify(this._resource)).then((function(){e.h.show("Copying to clipboard was successful")}),(function(e){console.error("Async: Could not copy text: ",e)}))})),this._shadow.getElementById("share").addEventListener("click",(()=>{const e=`${this._resourceType.type}.${this._resource.id}.txt`,t=new File([JSON.stringify(this._resource)],e,{type:"text/plain"});navigator.share({title:e,files:[t]}).then((()=>{console.log("sharing was successful!")}),(e=>{console.error("Could not share resource: ",e)}))})),this._shadow.querySelector("tab-bar").addEventListener("click",(({detail:e})=>{const n=e.tab.id,o=this._shadow.getElementById("xmlView");this._shadow.getElementById("jsonView").hidden="tabJson"!==n,this._shadow.getElementById("xmlView").hidden="tabXml"!==n,"tabXml"!=n||this._xmlLoaded||t.t.readXml(this._resourceType.type,this._resourceId).then((e=>{const t=(new DOMParser).parseFromString(e,"application/xml");o.source=t,this._xmlLoaded=!0})).catch((e=>{}))}))}load({resourceType:e,resourceId:n}){if(e===this._resourceType&&n===this.resourceId)return;const o=this._shadow.getElementById("header"),a=this._shadow.querySelector("tab-bar"),r=this._shadow.getElementById("jsonView"),s=this._shadow.getElementById("xmlView"),i=this._shadow.getElementById("share"),l=this._shadow.getElementById("copy"),d=this._shadow.getElementById("download");this._shadow.getElementById("title").innerText=`${e.type} : ${n}`,o.classList.remove("error"),this._shadow.getElementById("error").hidden=!0,a.hidden=!1,a.select("tabJson"),s.clear(),this._xmlLoaded=!1,r.clear(),t.t.read(e.type,n).then((t=>{this._resourceType=e,this._resourceId=n,this._resource=t,r.source=t,i.hidden=!1,l.hidden=!1,d.hidden=!1})).catch((e=>{o.classList.add("error");const t=this._shadow.getElementById("error");t.hidden=!1,t.innerText=e,a.hidden=!0,r.hidden=!0,s.hidden=!0,this._resource=null,i.hidden=!0,l.hidden=!0,d.hidden=!0}))}}const o=document.createElement("template");o.innerHTML='\n        <link rel="stylesheet" href="./assets/material.css">\n        <style>\n            #wrapper {\n                display:flex;\n                flex-direction: column;\n                height : 100%;\n            }\n            #title {\n                margin:0;\n                overflow:hidden;\n                text-overflow:ellipsis;\n            }\n            #jsonView, #xmlView {\n                flex:1 1 auto;\n                height:0;\n            }\n            #header.error {\n                background-color: var(--background-error, transparent);\n                color: white;\n            }\n            #error {\n                padding: 1em;\n            }\n        </style>\n        <div id="wrapper">\n            <app-bar id="header">\n                <round-button slot="left" id="back" title="back" data-icon="arrow_back"></round-button>\n                <h3 slot="middle" id="title"></h3>\n                <round-button slot="right" id="share" title="Share" data-icon="share"></round-button>\n                <round-button slot="right" id="copy" title="Copy to clipboard" data-icon="content_copy"></round-button>\n                <round-button slot="right" id="download" title="Download" data-icon="download"></round-button>\n                <round-button slot="right" id="help" title="Help" data-icon="help"></round-button>\n            </app-bar>\n            <tab-bar>\n                <app-tab id="tabJson" selected>Json</app-tab>\n                <app-tab id="tabXml">Xml</app-tab>\n            </tab-bar>\n            <fhir-resource-json id="jsonView"></fhir-resource-json>\n            <fhir-resource-xml id="xmlView"></fhir-resource-xml>\n            <span id="error"></span>\n        </div>\n    ',window.customElements.define("fhir-resource",n)}();class n{static{this.KEY="preferences"}static get(e,t=null){const n=localStorage.getItem(this.KEY);let o=null;return null===n?t:(o=JSON.parse(n),o[e]||t)}static set(e,t){const n=localStorage.getItem(this.KEY);let o=null;o=null!==n?JSON.parse(n):{},o[e]=t,localStorage.setItem(this.KEY,JSON.stringify(o))}}!function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(o.content.cloneNode(!0))}connectedCallback(){const e=this._shadow.querySelector("nav");this._shadow.getElementById("close").addEventListener("click",(()=>{this.hidden=!0})),this._shadow.querySelector("main").addEventListener("click",(()=>{this.hidden=!0})),this._shadow.querySelector(".surface").addEventListener("click",(e=>{e.stopPropagation()})),e.addEventListener("click",(({target:t})=>{const n=t.closest("list-item");if(n){const t=e.querySelector(".selected");t&&t.classList.remove("selected"),n.classList.add("selected"),this.serverChanged(n.dataset.id),this.hidden=!0}})),this.loadConf().then((e=>{this._conf=e;const t=n.get("server"),o=this._shadow.querySelector("nav");for(const n of Object.keys(e).sort(((e,t)=>e.localeCompare(t)))){const e=document.createElement("list-item");e.setAttribute("data-id",n),n===t&&e.classList.add("selected");const a=document.createElement("span");a.appendChild(document.createTextNode(n)),a.slot="title",e.appendChild(a);const r=document.createElement("span");r.appendChild(document.createTextNode(this._conf[n].url)),r.slot="subTitle",e.appendChild(r),o.appendChild(e)}null!=t?this.serverChanged(t):this.hidden=!1}))}serverChanged(e){const o=this._conf[e];this.connect(o),t.t.server=o,this.dispatchEvent(new CustomEvent("serverchanged",{bubbles:!1,cancelable:!1,detail:{serverCode:e,server:o}})),n.set("server",e)}connect(e){if(e.auth)switch(e.auth.method){case"oauth2":this.oauth2_getToken(e.auth.setup).then((t=>{e.headers||(e.headers={}),e.headers.Authorization=`${t.token_type} ${t.access_token}`}));break;case"basic":let t=btoa(`${e.auth.setup.username}:${e.auth.setup.password}`);e.headers||(e.headers={}),e.headers.Authorization=`Basic ${t}`}}async oauth2_getToken(e){let t={client_id:e.client_id,client_secret:e.client_secret,grant_type:e.grant_type,username:e.username,password:e.password},n=new URLSearchParams(t);return(await fetch(e.access_token_url,{headers:{"Content-type":"application/x-www-form-urlencoded"},method:"POST",body:n.toString()})).json()}async loadConf(){let e=localStorage.getItem("conf");return null===e?await fetch("./default.conf",{cache:"reload"}).then((e=>e.json())).then((e=>(localStorage.setItem("conf",JSON.stringify(e)),e))):JSON.parse(e)}}const o=document.createElement("template");o.innerHTML='\n        <link rel="stylesheet" href="./assets/material.css">\n        <style>\n            main {\n                position: absolute;\n                top: 0;\n                left:0;\n                background-color: rgba(0,0,0,32%);\n                min-height: 100%;\n                min-width: 100%;\n            }\n            .surface {\n                background-color: var(--background-color, white);\n                border-radius: 4px;\n                height: 50%;\n                min-width: 20%;\n                position: absolute;\n                top: 60px;\n                right: 1em;\n            }\n            .overlay {\n                background-color: rgba(255,255,255,4%);\n                color:var(--text-color-normal, white);\n                display:flex;\n                flex-direction: column;\n                font-family: Roboto, Arial, monospace;\n                height: 100%;\n            }\n            app-bar {\n                border-bottom: 1px solid var(--border-color);\n            }\n            nav {\n                overflow:auto;\n                flex: 1 1 auto;\n                height: 0;\n            }\n            list-item {\n                cursor: pointer;\n            }\n            list-item.selected {\n                background-color: var(--hover-color, rgba(0, 0, 0, 5%));\n            }\n            #actions {\n                border-top: 1px solid var(--border-color);\n                padding: 0.5em 1em;\n                text-align: center;\n                overflow: hidden;\n            }\n            #actions input[type=button] {\n                background: none;\n                border: 1px solid var(--primary-color);\n                border-radius: 4px;\n                color: var(--primary-color);\n                cursor: pointer;\n                font: inherit;\n                padding: 5px 16px;\n                text-transform: uppercase;\n            }\n            #actions input[type=button]:hover {\n                background-color: var(--hover-color);\n            }\n            @media (max-width:480px){\n                .surface {\n                    top:0;\n                    left:0;\n                    height: 100%;\n                    width:100%;\n                    max-width: unset;\n                    max-height: unset;\n                }\n                .overlay {\n                    background-color: transparent;\n                }\n            }\n        </style>\n        <main>\n            <div class="surface">\n                <div class="overlay">\n                    <app-bar id="header">\n                        <round-button id="close" title="Close" data-icon="close" slot="left"></round-button>\n                        <h3 id="title" slot="middle">Connections</h3>\n                    </app-bar>\n                    <nav></nav>\n                    <div id="actions">\n                        <input type="button" value="New connection"></input>\n                    <div>\n                </div>\n            </div>\n        </main>\n    ',window.customElements.define("fhir-server",e)}(),function(){class e extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(t.content.cloneNode(!0))}connectedCallback(){this._shadow.addEventListener("click",this._onClick.bind(this)),this._setColorScheme(n.get("colorScheme","auto"))}disconnectedCallback(){this._shadow.removeEventListener("click",this._onClick)}_onClick(e){const t=["light","dark","auto"];let o=n.get("colorScheme","auto"),a=t.findIndex((e=>e===o))+1;o=t[a%3],n.set("colorScheme",o),this._setColorScheme(o)}_setColorScheme(e){let t="",n=e;switch(e){case"dark":t="brightness_4";break;case"light":t="light_mode";break;default:"auto"===e&&(n=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),t="brightness_auto"}const o=this._shadow.querySelector("round-button");o.setAttribute("data-icon",t),o.title=`Theme ${e}`,document.body.setAttribute("color-scheme",n)}get value(){return n.get("colorScheme","auto")}}const t=document.createElement("template");t.innerHTML='\n        <round-button title="" data-icon=""></round-button>\n    ',window.customElements.define("color-scheme",e)}(),"serviceWorker"in navigator&&navigator.serviceWorker.register("./service-worker.js"),function(){class n extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.appendChild(o.content.cloneNode(!0)),window.addEventListener("hashchange",this.locationHandler),this._metadata=null}locationHandler=async()=>{let t=window.location.hash.replace("#","").trim();if(t.length){let n=t.split("/");const o=this._metadata.rest[0].resource.filter((e=>e.type===n[0]))[0];if(!o)return void e.h.show(`Resource "${o}" not found!`);this._shadow.getElementById("bdy").style.visibility="visible",window.matchMedia("(max-width: 480px)").matches&&this._shadow.getElementById("leftPanel").classList.add("hidden");const a=this._shadow.getElementById("bundle");if(n.length>0&&n[1])return a.hidden=!0,void this._shadow.getElementById("resource").load({resourceType:o,resourceId:n[1]});a.hidden=!1,this._shadow.getElementById("metadata").select(o.type),a.load(o)}};connectedCallback(){e.h.container=this._shadow,this._shadow.getElementById("navigation").addEventListener("click",(()=>{this._shadow.getElementById("leftPanel").classList.toggle("hidden")})),this._shadow.getElementById("serverSelector").addEventListener("serverchanged",(({detail:n})=>{e.h.show(`Connected to "${n.serverCode}" server.`),this._shadow.getElementById("bdy").style.visibility="hidden";const o=this._shadow.getElementById("metadata");o.clear(),t.t.capabilities().then((e=>{this._metadata=e,o.metadata=e,o.hidden=!1,location.hash=""}))})),this._shadow.getElementById("serverSelectorToggle").addEventListener("click",(()=>{this._shadow.getElementById("serverSelector").hidden=!1}))}}const o=document.createElement("template");o.innerHTML='\n        <link rel="stylesheet" href="./assets/material.css">\n        <style>\n            :host {\n                background-color: var(--background-color, rgb(255,255,255));\n                color: var(--text-color-normal, rgb(0,0,0,87%));\n                display: flex;\n                flex-direction: column;\n                font-family: Roboto, Arial, monospace;\n                font-size: 1rem;\n                font-weight: 400;\n                height: 100vh;\n                line-height: 1.5;\n            }\n            header {\n                background-color: var(--primary-color, #000);\n                color:#FFF;\n            }\n            h3 {\n                margin:0;\n            }\n            main {\n                flex:1 1 auto;\n                height : 0;\n                overflow: hidden;\n            }\n            main > div {\n                display:flex;\n                flex-direction: row;\n                height : 100%;\n            }\n            #leftPanel {\n                border-right:1px solid var(--border-color, gray);\n                flex: none;\n                transition: all 0.3s;\n                margin-left: 0;\n                width:300px;\n            }\n            #leftPanel.hidden {\n                transition: all 0.3s;\n                margin-left: -300px;\n            }\n            #bdy {\n                flex: 1 1 auto;\n                overflow: hidden;\n                width: 0;\n                /*display: flex;\n                flex-direction: row;*/\n                position: relative;\n                block-size: 100%;\n                display: grid;\n                grid-auto-flow: column;\n                grid-auto-columns: 100%;\n                grid-auto-rows: 100%;\n            }\n\n            @media (max-width:480px){\n                #leftPanel {\n                    background-color: var(--background-color, rgb(255,255,255));\n                    position: static;\n                    width:100%;\n                }\n                #leftPanel.hidden {\n                    margin-left: -100%;\n                }\n            }\n        </style>\n        <header>\n            <app-bar id="header" caption="">\n                <round-button slot="left" id="navigation" title="Menu" data-icon="menu"></round-button>\n                <h3 slot="middle">FHIR Browser</h3>\n                <color-scheme slot="right"></color-scheme>\n                <round-button slot="right" id="serverSelectorToggle" title="Connections" data-icon="public"></round-button>\n            </app-bar>\n        </header>\n        <main>\n            <div>\n                <app-left-panel id="leftPanel">\n                    <fhir-metadata id="metadata" hidden></fhir-metadata>\n                </app-left-panel>\n                <div id="bdy" style="visibility:hidden;">\n                    <fhir-bundle id="bundle"></fhir-bundle>\n                    <fhir-resource id="resource"></fhir-resource>\n                </div>\n            </div>\n        </main>\n        <fhir-server id="serverSelector" hidden></fhir-server>\n    ',window.customElements.define("fhir-browser",n)}()})()})();