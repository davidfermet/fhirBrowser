(()=>{var e={70:()=>{customElements.define("app-bar",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=`\n            <link href="./material.css" rel="stylesheet"/>\n            <style>\n                div {\n                    background-color: var(--primary-color, #000);\n                    text-transform: uppercase;\n                    color:#FFF; \n                    padding:1em;\n                    display:flex;\n                    flex-direction:row;\n                    align-items:center;\n                }\n                i {\n                    margin-right: 1.3em;\n                    cursor: pointer;\n                }\n            </style>\n            <div><i id="menu" class="material-icons">menu</i><span>${this.getAttribute("title")}</span></div>\n        `}connectedCallback(){this._shadow.getElementById("menu").addEventListener("click",(e=>{this.dispatchEvent(new CustomEvent("navigationClick",{bubbles:!1,cancelable:!1})),e.stopPropagation()}))}})},444:()=>{customElements.define("data-table",class extends HTMLElement{constructor(){super(),this.rowClickEvent=new CustomEvent("rowclick",{bubbles:!1,cancelable:!1});const e=this.attachShadow({mode:"open"});e.innerHTML='\n            <link href="./material.css" rel="stylesheet"/>\n            <style>\n                div {\n                    background-color: var(--background-color, white);\n                    border: 1px solid var(--border-color, gray);\n                    border-radius: 4px;\n                    height:100%;\n                }\n                table {\n                    border: 0;\n                    white-space: nowrap;\n                    border-collapse: collapse;\n                    display:flex;\n                    flex-direction:column;\n                    height:100%;\n                }\n                thead, tbody tr, tfoot {\n                    display:table;\n                    width:100%;\n                    table-layout:fixed;\n                }\n                thead {\n                    width: calc( 100% - 5px );\n                }\n                th {\n                    text-align: left;\n                    height: 56px;\n                    padding-right: 16px;\n                    padding-left: 16px;\n                    overflow:hidden;\n                }\n                tbody {\n                    border-top: 1px solid var(--border-color, gray);\n                    display:block;\n                    overflow-y:auto;\n                    flex: 1 1 auto;\n                }\n                tbody tr {\n                    cursor:pointer;\n                    border-bottom: 1px solid var(--border-color, gray);\n                }\n                tbody tr:hover, tbody tr.selected {\n                    background-color: var(--hover-color, rgba(0, 0, 0, 5%));\n                }\n                tbody td {\n                    height: 52px;\n                    padding-right: 16px;\n                    padding-left: 16px;\n                    overflow:hidden;\n                    text-overflow: ellipsis;\n                }\n                tfoot {\n                    border-top: 1px solid var(--border-color, gray);\n                }\n                tfoot td {\n                    text-align: right;\n                    overflow: hidden;\n                }\n            </style>\n            <div>\n                <table>\n                    <thead>\n                        <tr id="header"></tr>\n                    </thead>\n                    <tbody id="body">\n                    </tbody>\n                    <tfoot>\n                        <tr>\n                            <td id="footer">\n                                <slot name="footer"/>\n                            </td>\n                        </tr>\n                    </tfoot>\n                </table>\n            </div>\n        ',this._header=e.getElementById("header"),this._body=e.getElementById("body"),this._footerCell=e.getElementById("footer")}addColumn(e){let t=document.createElement("th"),n=document.createTextNode(e);t.appendChild(n),this._header.appendChild(t),this._footerCell.colSpan=this._header.childElementCount}addRow(e,t){let n=document.createElement("tr");n.id=e;for(const[,e]of Object.entries(t))n.insertAdjacentHTML("beforeend",`<td>${e}</td>`);n.addEventListener("click",function(e){let t=this._body.querySelector(".selected");t&&t.classList.remove("selected");let n=e.target;for(;n&&"TR"!==n.nodeName;)n=n.parentNode;n&&(n.classList.add("selected"),this.dispatchEvent(new CustomEvent("rowclick",{bubbles:!1,cancelable:!1,detail:{resourceId:n.id}}))),e.stopPropagation()}.bind(this)),this._body.appendChild(n)}removeAll(){for(;this._body.firstChild;)this._body.removeChild(this._body.lastChild)}})},760:()=>{customElements.define("app-linear-loader",class extends HTMLElement{connectedCallback(){this.attachShadow({mode:"closed"}).innerHTML='\n            <style>\n                .track {\n                    background-color: var(--border-color);\n                    overflow: hidden;\n                }\n                .thumb {\n                    height: 0.1em;\n                    width: 50%;\n                    background-color: var(--primary-color);\n                    left: -50%;\n                    position: relative;\n                    animation: loading 2s ease-in 0.5s infinite;\n                }\n                @keyframes loading {\n                    0% {transform:translateX(0)}\n                    to {transform:translateX(400%)}\n                }\n            </style>\n            <div class="track">\n                <div class="thumb" />\n            </div>\n       '}})},453:()=>{customElements.define("data-table-pagination",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='\n            <link rel="stylesheet" href="./material.css">\n            <style>\n                #wrapper {\n                    padding: 12px;\n                    font-family: inherit;\n                    font-size: .875rem;\n                }\n                button {\n                    border:0;\n                    background:none;\n                    vertical-align:middle;\n                    cursor:pointer;\n                    color:var(--text-color-normal);\n                }\n                button[disabled] {\n                    cursor: default;\n                    color:var(--text-color-disabled);\n                }\n                span {\n                    vertical-align:middle;\n                    margin: 0 24px;\n                }            \n            </style>\n            <div id="wrapper">\n                <span id="text"></span>\n                <button id="first" title="first" disabled><i class="material-icons">first_page</i></button>\n                <button id="previous" title="previous" disabled><i class="material-icons">chevron_left</i></button>\n                <button id="next" title="next" disabled><i class="material-icons">chevron_right</i></button>\n                <button id="last" title="last" disabled><i class="material-icons">last_page</i></button>\n            </div>\n        '}connectedCallback(){this._shadow.getElementById("wrapper").addEventListener("click",(e=>{let t=e.target;for(;t&&"BUTTON"!==t.nodeName;)t=t.parentNode;t&&!t.disabled&&this.dispatchEvent(new CustomEvent("pagination",{bubbles:!1,cancelable:!1,detail:{button:t.id}}))}))}set first(e){this._shadow.getElementById("first").disabled=!e}set previous(e){this._shadow.getElementById("previous").disabled=!e}set next(e){this._shadow.getElementById("next").disabled=!e}set last(e){this._shadow.getElementById("last").disabled=!e}set text(e){this._shadow.getElementById("text").innerText=e}})},586:()=>{customElements.define("app-round-button",class extends HTMLElement{connectedCallback(){this.attachShadow({mode:"closed"}).innerHTML=`\n            <link href="./material.css" rel="stylesheet"/>\n            <style>\n                #wrapper {\n                    padding:8px;\n                    cursor:pointer;\n                    text-align:center;\n                    border:0 none;\n                    color: inherit;\n                    background-color:transparent;\n                }\n                #wrapper:hover {\n                    background-color:var(--hover-color, rgba(0,0,0,5%));\n                    border-radius: 50%;\n                }\n            </style>\n            <div id="wrapper" class="material-icons">${this.innerHTML}</div>\n        `}})},187:()=>{customElements.define("app-tabs",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='\n            <style>\n                #wrapper {\n                    display:flex;\n                    flex-direction:row;            \n                    flex-wrap: nowrap;        \n                }\n                ::slotted(app-tab) {\n                    flex-grow:1;\n                    border-bottom: 2px solid transparent;\n                }\n                ::slotted(app-tab:hover) {\n                    background-color:var(--hover-color, rgba(0, 0, 0, 5%));\n                }\n                ::slotted(app-tab[selected]) {\n                    border-bottom-color: var(--primary-color, #000);\n                }\n            </style>\n            <template id="template">\n                <div id="wrapper"><slot></slot></div>\n            </template>\n        '}connectedCallback(){const e=this._shadow.getElementById("template").content;this._shadow.appendChild(e.cloneNode(!0)),this._shadow.getElementById("wrapper").onclick=e=>{"APP-TAB"===e.target.nodeName&&(this._shadow.querySelector("slot").assignedElements().forEach((e=>e.removeAttribute("selected"))),e.target.setAttribute("selected","selected"),this.dispatchEvent(new CustomEvent("click",{bubbles:!1,cancelable:!1,detail:{tabId:e.target.id}})),e.stopPropagation())}}}),customElements.define("app-tab",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML=`\n            <style>\n                button {\n                    background-color: transparent;\n                    border: 0 none;\n                    color: var(--text-color-normal, black);\n                    cursor: pointer;\n                    font-family: inherit;\n                    font-size: inherit;\n                    height: 3em;\n                    text-transform: uppercase;\n                    white-space: nowrap;\n                    width:100%;\n                }\n            </style>\n            <button>${this.innerHTML}</button>\n        `}})},817:()=>{customElements.define("fhir-resource-types-filter",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='\n            <link href="./material.css" rel="stylesheet"/>\n            <style>\n                #wrapper {\n                    background-color: rgba(var(--text-color, black), 4%);\n                    border: 1px solid transparent;\n                    display: flex;\n                    padding: 0.7em;\n                    font-size: smaller;\n                }\n                #wrapper:focus-within {\n                    border-bottom-color: var(--primary-color, black);\n                }\n                #text {\n                    background: none;\n                    border: 0 none;\n                    color: var(--text-color-normal);\n                    flex: 1 1 auto;\n                    font-family: inherit;\n                    font-size: inherit;\n                }\n                #text:focus {\n                    outline: none; \n                }\n                #clear {\n                    cursor: pointer;\n                    font-size: inherit;\n                    line-height: unset;\n                }\n            </style>\n            <div id="wrapper">\n                <input id="text" type="text" placeholder="Type to filter"/>\n                <i id="clear" class="material-icons" title="clear">close</i>\n            </div>\n        '}connectedCallback(){const e=this._shadow.getElementById("text");function t(t){this.dispatchEvent(new CustomEvent("filterChanged",{bubbles:!1,cancelable:!1,detail:{text:e.value}}))}this._shadow.getElementById("clear").addEventListener("click",(()=>{e.value&&(e.value="",t.call(this))})),this._shadow.getElementById("wrapper").addEventListener("mousedown",(t=>{t.preventDefault(),t.stopPropagation(),e.focus()})),e.addEventListener("input",t.bind(this))}clear(){this._shadow.getElementById("clear").click()}})},141:()=>{customElements.define("fhir-server-details",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='\n            <style>\n                #wrapper {\n                    overflow-y: auto;\n                }\n                #wrapper > div {\n                    padding: 0.5em 1em;\n                }\n                #wrapper > div:hover {\n                    background-color: var(--hover-color, rgba(0, 0, 0, 5%));\n                }\n                span {\n                    display: block;\n                }\n                span:nth-of-type(1) {\n                    text-overflow: ellipsis;\n                    white-space: nowrap;\n                    overflow: hidden;\n                    text-transform: capitalize;\n                    color: var(--text-color-normal, black);\n                }\n                span:nth-of-type(2) {\n                    font-size: 0.875em;\n                    color: rgba(var(--text-color, "0, 0, 0"), 54%);\n                    overflow-wrap: break-word;\n                }\n            </style>\n            <div id="wrapper"></div>\n        '}set metadata(e){const t=this._shadow.getElementById("wrapper");for(;t.firstChild;)t.removeChild(t.lastChild);function n(e,n){if(void 0===n)return;const r=document.createElement("div"),s=document.createElement("span");s.innerText=e,r.appendChild(s);const a=document.createElement("span");a.innerText=n,r.appendChild(a),t.appendChild(r)}n("copyright",e.copyright),n("description",e.description),n("fhirVersion",e.fhirVersion),e.implementation&&(n("implementation description",e.implementation.description),n("implementation name",e.implementation.name),n("implementation url",e.implementation.url)),n("language",e.language),n("name",e.name),n("publisher",e.publisher),e.software&&(n("software name",e.software.name),n("software version",e.software.version),n("software release date",e.software.releaseDate))}})},251:()=>{customElements.define("fhir-server-selector",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='\n            <link href="./material.css" rel="stylesheet"/>\n            <style>\n                #wrapper {\n                    padding:25px;\n                }\n                #server {\n                    background-color: var(--background-color, white);\n                    border: 1px solid var(--border-color, rgba(0,0,0,38%));\n                    border-radius: 4px;\n                    color: var(--text-color-normal, rgb(0,0,0,87%));\n                    font-family: inherit;\n                    font-size: 1em;\n                    padding: 8px 5px 5px 5px;\n                    width: 100%;\n                }\n                #server:hover {\n                    border-color: var(--border-color, rgba(0,0,0,38%));\n                }\n                #server:active {\n                    outline-style: auto;\n                    outline-color: var(--primary-color, black);\n                }\n                #server:focus-visible {\n                    outline-color: var(--primary-color, black);\n                }\n                #server-wrapper {\n                    position:relative;\n                }\n                #server-label {\n                    position: absolute;\n                    top: -0.8em;\n                    left: 0.5em;\n                    background-color: var(--background-color, white);\n                    font-size: 0.7em;   \n                    font-family: inherit;\n                    padding: 0 5px;"\n                }\n                #server-url {\n                    overflow-wrap: break-word;\n                    color: var(--text-color-disabled);\n                    font-size: 0.9em;\n                    margin-top: 0.5em;\n                }\n            </style>\n            <div id="wrapper">\n                <div id="server-wrapper">\n                    <label id="server-label">FHIR server</label>\n                    <select id="server"><option hidden selected>Select a server</option></select>\n                </div>\n                <div id="server-url"></div>\n            </div>\n        ',this._conf=null,this._server=this._shadow.getElementById("server")}connectedCallback(){this.loadConf().then((e=>{this._conf=e;for(const t of Object.keys(e).sort()){const e=document.createElement("OPTION");e.setAttribute("value",t),e.appendChild(document.createTextNode(t)),this._server.appendChild(e)}})),this._server.addEventListener("change",(()=>{const e=this._conf[this._server.value];this._shadow.getElementById("server-url").innerText=e.url,this.connect(e),this.dispatchEvent(new CustomEvent("serverchanged",{bubbles:!1,cancelable:!1,detail:{server:e}}))}))}connect(e){if(e.auth)switch(e.auth.method){case"oauth2":this.oauth2_getToken(e.auth.setup).then((t=>{e.headers.Authorization=`${t.token_type} ${t.access_token}`}));break;case"basic":let t=btoa(`${e.auth.setup.username}:${e.auth.setup.password}`);e.headers.Authorization=`Basic ${t}`}}async oauth2_getToken(e){let t={client_id:e.client_id,client_secret:e.client_secret,grant_type:e.grant_type,username:e.username,password:e.password},n=new URLSearchParams(t);return(await fetch(e.access_token_url,{headers:{"Content-type":"application/x-www-form-urlencoded"},method:"POST",body:n.toString()})).json()}async loadConf(){let e=localStorage.getItem("conf");return null===e?await fetch("./default.conf",{cache:"reload"}).then((e=>e.json())).then((e=>(localStorage.setItem("conf",JSON.stringify(e)),e))):JSON.parse(e)}})}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}(()=>{"use strict";n(70),n(760),n(453),n(444),customElements.define("fhir-bundle",class extends HTMLElement{constructor(){super();let e=this.attachShadow({mode:"closed"});e.innerHTML='\n            <link href="./material.css" rel="stylesheet"/>\n            <style>\n                div {\n                    display:flex;\n                    flex-direction:column;\n                    height:100%;\n                }\n                #table {\n                    flex:1 1 auto;\n                    height:0;\n                }\n                .header {\n                    margin-bottom: 1em;\n                    display: flex;\n                    align-items: center;\n                }\n                .header > * {\n                    margin-right: .5em;\n                }\n                #help {\n                    color: var(--primary-color);\n                }\n            </style>\n            <div>\n                <h2 class="header">\n                    <span id="title"></span>\n                    <app-round-button id="help" title="Help">help</app-round-button>\n                </h2>\n                <app-linear-loader id="loader" style="visibility:hidden;"></app-linear-loader>\n                <data-table id="table">\n                    <data-table-pagination id="pagination" slot="footer"/>\n                </data-table>\n            </div>\n        ',this._title=e.getElementById("title"),this._help=e.getElementById("help"),this._loader=e.getElementById("loader"),this._dataTable=e.getElementById("table"),this._pagination=e.getElementById("pagination"),this._server=null,this._resourceType=null,this._skip=0,this._pageSize=20,this._link=null,this._count=null}connectedCallback(){this._help.addEventListener("click",(e=>{const t=this._server.metadata.rest[0].resource.find((e=>e.type==this._resourceType));window.open(t.profile,"_blank")})),this._pagination.addEventListener("pagination",(e=>{this.loadPage(e.detail.button)})),this._dataTable.addColumn("id"),this._dataTable.addColumn("lastUpdated"),this._dataTable.addEventListener("rowclick",(e=>{this.dispatchEvent(new CustomEvent("resourceSelected",{bubbles:!1,cancelable:!1,detail:{resourceType:this._resourceType,resourceId:e.detail.resourceId}}))}))}load(e,t){this._server=e,this._resourceType=t;const n=e.metadata.rest[0].resource.find((e=>e.type==t));this._help.href=n.profile,this._title.innerText=t,this._skip=0,this._link={first:`${this._server.url}/${this._resourceType}?_count=${this._pageSize}&_elements=entry.id,entry.lastupdated`},this.loadPage()}loadPage(e="first"){switch(e){case"first":this._skip=0;break;case"previous":this._skip-=this._pageSize;break;case"next":this._skip+=this._pageSize;break;case"last":this._skip=Math.floor(this._count/this._pageSize)*this._pageSize;break;default:return}const t=this._link[e];this._dataTable.removeAll(),this._loader.style.visibility="visible",this.fetchPage(t).then((e=>{e.total?(this._count=e.total,this.parsePage(e),this._loader.style.visibility="hidden"):this.fetchCount().then((t=>{this._count=t.total,this.parsePage(e),this._loader.style.visibility="hidden"}))}))}parsePage(e){let t="0";0!=this._count&&(t=`${this._skip+1}-${Math.min(this._skip+this._pageSize,this._count)}`),this._pagination.text=`${t} of ${this._count}`,e.entry&&(e.entry.forEach((e=>{if(e.resource&&e.resource.resourceType==this._resourceType){let n={id:e.resource.id,lastupdated:(t=e.resource.meta.lastUpdated,new Date(t).toLocaleDateString("en",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))};this._dataTable.addRow(e.resource.id,n)}var t})),this._link={},this._pagination.first=!1,this._pagination.previous=!1,this._pagination.next=!1,this._pagination.last=!1,e.link.forEach((e=>{switch(this._link[e.relation]=e.url,e.relation){case"first":this._pagination.first=!0;break;case"previous":this._pagination.previous=!0;break;case"next":this._pagination.next=!0;break;case"last":this._pagination.last=!0}})))}async fetchPage(e){return(await fetch(e,{headers:this._server.headers})).json()}async fetchCount(){return(await fetch(`${this._server.url}/${this._resourceType}?_summary=count&_format=json`,{headers:this._server.headers})).json()}}),n(187),n(817),customElements.define("fhir-resource-types",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='\n            <link href="./material.css" rel="stylesheet"/>\n            <style>\n                #wrapper {\n                    display: flex;\n                    flex-direction: column;\n                    height:100%;\n                }\n                #list {\n                    flex:1 1 auto;\n                    height:0;\n                    overflow:auto;\n                }\n                ul {\n                    list-style: none;\n                    padding: 0;\n                    margin: 0;\n                }\n                li {\n                    cursor: pointer;\n                    padding: 0.3em 1em;\n                }\n                li:hover, li.selected {\n                    background-color:var(--hover-color, lightgray);\n                }\n            </style>\n            <div id="wrapper">\n                <fhir-resource-types-filter id="filter"></fhir-resource-types-filter>\n                <div id="list"><ul></ul></div>\n            </div>\n        '}connectedCallback(){this._shadow.getElementById("filter").addEventListener("filterChanged",(e=>{const t=this._shadow.getElementById("list").firstElementChild,n=e.detail.text.toLowerCase();t.childNodes.forEach((e=>{e.hidden=!e.id.toLowerCase().startsWith(n)}))})),this._shadow.getElementById("list").onclick=e=>{if("LI"===e.target.nodeName){let t=this._shadow.querySelector(".selected");t&&t.classList.remove("selected"),e.target.classList.add("selected"),this.dispatchEvent(new CustomEvent("resourceTypeSelected",{bubbles:!1,cancelable:!1,detail:{resourceType:e.target.id}})),e.stopPropagation()}}}set metadata(e){this._shadow.getElementById("filter").clear();const t=this._shadow.getElementById("list");t.scrollTop=0;const n=t.firstElementChild;for(;n.firstChild;)n.removeChild(n.lastChild);e.rest[0].resource.forEach((e=>{const t=document.createElement("li");t.id=e.type,t.innerHTML=e.type,n.appendChild(t)}))}}),n(141),customElements.define("fhir-metadata",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='\n            <style>\n                #wrapper {\n                    display:flex;\n                    flex-direction: column;\n                    height : 100%;\n                }\n                #tabs {\n                    border-bottom:1px solid var(--border-color, gray);                    \n                }                \n                #resourceTypes, #serverDetails {\n                    flex:1 1 auto;\n                    overflow: auto;\n                    height:0;\n                }\n            </style>\n            <div id="wrapper">\n                <app-tabs id="tabs">\n                    <app-tab id="tabResources" selected>Resource Types</app-tab>\n                    <app-tab id="tabDetails">Details</app-tab>\n                </app-tabs>\n                <fhir-resource-types id="resourceTypes"></fhir-resource-types>\n                <fhir-server-details id="serverDetails" hidden></fhir-server-details>\n            </div>\n        ',this._metadata=null}connectedCallback(){this._shadow.getElementById("tabs").addEventListener("click",(e=>{const t=e.detail.tabId;this._shadow.getElementById("resourceTypes").hidden="tabResources"!==t,this._shadow.getElementById("serverDetails").hidden="tabDetails"!==t})),this._shadow.getElementById("resourceTypes").addEventListener("resourceTypeSelected",(e=>{this.dispatchEvent(new CustomEvent("resourceTypeSelected",{bubbles:!1,cancelable:!1,detail:{resourceType:e.detail.resourceType}})),e.stopPropagation()}))}set metadata(e){this._shadow.getElementById("resourceTypes").metadata=e,this._shadow.getElementById("serverDetails").metadata=e}}),n(586),customElements.define("fhir-resource-json",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='\n            <link rel="stylesheet" href="./material.css">\n            <style>\n                #wrapper {\n                    display:flex;\n                    flex-direction:column;\n                    height:100%;\n                }\n                #toolbar {\n                    padding: 0.5em;\n                    text-align: right;\n                }\n                #content {\n                    background-color: var(--background-color, inherit);\n                    color: var(--text-color-normal, black);\n                    flex: 1 1 auto;\n                    font-family: monospace;\n                    height:0;\n                    overflow: auto;\n                    padding: 0 8px;\n                    white-space: nowrap;\n                }\n                dl {\n                    margin: 0;\n                    padding-left: 1.5em;\n                }\n                dt {\n                    list-style-type: none;\n                }\n                span:first-of-type {\n                    color: var(--json-viewer-properties-color, black);\n                }\n                span {\n                    color: var(--json-viewer-values-color, black);\n                }\n            </style>\n            <div id="wrapper">\n                <div id = "toolbar" >\n                    <app-round-button id="share" title="Share">share</app-round-button>\n                    <app-round-button id="copy" title="Copy to clipboard">content_copy</app-round-button>\n                    <app-round-button id="download" title="Download">download</app-round-button>\n                </div>\n                <div id="content"></div>\n            </div>\n        ',this._resource=null}connectedCallback(){this._shadow.getElementById("download").addEventListener("click",(()=>{const e=new File([JSON.stringify(this._resource)],this._resource.id,{type:"data:text/json;charset=utf-8"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=`${this._resource.resourceType}#${e.name}.json`,this._shadow.appendChild(n),n.click(),this._shadow.removeChild(n),window.URL.revokeObjectURL(t)})),this._shadow.getElementById("copy").addEventListener("click",(()=>{navigator.clipboard.writeText(JSON.stringify(this._resource)).then((function(){console.log("Async: Copying to clipboard was successful!")}),(function(e){console.error("Async: Could not copy text: ",e)}))})),this._shadow.getElementById("share").addEventListener("click",(()=>{const e=`${this._resource.resourceType}.${this._resource.id}.txt`,t=new File([JSON.stringify(this._resource)],e,{type:"text/plain"});navigator.share({title:e,files:[t]}).then((()=>{console.log("sharing was successful!")}),(e=>{console.error("Could not share resource: ",e)}))}))}set source(e){this._resource=e;const t=this._shadow.getElementById("content");for(;t.firstChild;)t.removeChild(t.lastChild);!function e(t,n){let r=Array.isArray(n);t.appendChild(document.createTextNode(r?"[":"{"));let s=document.createElement("dl");for(const[t,a]of Object.entries(n)){const n=document.createElement("dt");if(!r){const e=document.createElement("span");e.innerText=`"${t}"`,n.appendChild(e),n.appendChild(document.createTextNode(": "))}if("object"==typeof a)e(n,a);else{const e=document.createElement("span");e.innerText="string"==typeof a?`"${a}"`:a,n.appendChild(e)}const o=s.lastElementChild;o&&o.nodeName==n.nodeName&&o.appendChild(document.createTextNode(",")),s.appendChild(n)}t.appendChild(s),t.appendChild(document.createTextNode(r?"]":"}"))}(t,e)}}),customElements.define("fhir-resource",class extends HTMLElement{constructor(){super(),this._shadow=this.attachShadow({mode:"closed"}),this._shadow.innerHTML='\n            <link rel="stylesheet" href="./material.css">\n            <style>\n                #wrapper {\n                    display:flex;\n                    flex-direction: column;\n                    height : 100%;\n                }\n                .header {\n                    margin-bottom: 1em;\n                    display: flex;\n                    align-items: center;\n                }\n                .header > * {\n                    margin-right: .5em;\n                }\n                #help {\n                    color: var(--primary-color);\n                }\n                #tabs {\n                    border-bottom:1px solid var(--border-color, gray);\n                }\n                #jsonView {\n                    flex:1 1 auto;\n                    overflow: auto;\n                    height:0;\n                }\n            </style>\n            <div id="wrapper">\n                <h2 class="header">\n                    <app-round-button id="back" title="back">arrow_back</app-round-button>\n                    <span id="title"></span>\n                    <app-round-button id="help" title="Help">help</app-round-button>\n                </h2>\n                <app-tabs id="tabs">\n                    <app-tab id="tabJson" selected>Json</app-tab>\n                    <app-tab id="tabMustache">Html</app-tab>\n                </app-tabs>\n                <fhir-resource-json id="jsonView"/>\n                <div id="MustacheView"/>\n            </div>\n        ',this._jsonView=this._shadow.getElementById("jsonView"),this._server=null,this._resourceType=null,this._resourceId=null}connectedCallback(){this._shadow.getElementById("back").addEventListener("click",(e=>{this.dispatchEvent(new CustomEvent("back",{bubbles:!1,cancelable:!1}))})),this._shadow.getElementById("help").addEventListener("click",(e=>{const t=this._server.metadata.rest[0].resource.find((e=>e.type==this._resourceType));window.open(t.profile,"_blank")})),this._shadow.getElementById("tabs").addEventListener("click",(e=>{const t=e.detail.tabId;this._shadow.getElementById("jsonView").hidden="tabJson"!==t,this._shadow.getElementById("MustacheView").hidden="tabMustache"!==t}))}load({server:e,resourceType:t,resourceId:n}){this._server=e,this._resourceType=t,this._resourceId=n,this._shadow.getElementById("title").innerText=t,this.fetchResource(e,t,n).then((e=>{this._jsonView.source=e}))}async fetchResource(e,t,n){return(await fetch(`${e.url}/${t}/${n}?_format=json`,{headers:e.headers})).json()}}),n(251),"serviceWorker"in navigator&&navigator.serviceWorker.register("./service-worker.js"),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("color-scheme","dark"),customElements.define("fhir-browser",class extends HTMLElement{constructor(){super(),this._schemas={"4.3.0":"R4B","4.0.1":"R4","3.0.2":"STU3"},this._shadow=this.attachShadow({mode:"open"}),this._shadow.innerHTML='\n            <link rel="stylesheet" href="./material.css">\n            <style>\n                #app {\n                    display: flex;\n                    flex-direction: column;\n                    height: 100vh;\n                    font-family: Roboto, Arial, monospace;\n                    font-size: 1rem;\n                    font-weight: 400;\n                    line-height: 1.5;\n                    background-color: var(--background-color, rgb(255,255,255));\n                    color: var(--text-color-normal, rgb(0,0,0,87%));\n                }\n                #header {\n                    min-height:56px;\n                }\n                #content {\n                    flex:1 1 auto;\n                    overflow: auto;\n                    height : 0;\n                }\n                #content > div {\n                    display:flex;\n                    flex-direction: row;\n                    height : 100%;\n                }\n                #leftPanel {\n                    border-right:1px solid var(--border-color, gray);\n                    width:300px;\n                    display:flex;\n                    flex-direction: column;\n                    height : 100%;\n                }\n                #bdy {\n                    padding:1em;\n                    overflow: auto;\n                    flex: 1 1 auto;\n                    width: 0;\n                }\n                #metadata {\n                    flex: 1 1 auto;\n                    height: 0;\n                }\n                @media (max-width:480px){\n                    #leftPanel {\n                        height: calc(100% - 56px - 1px);\n                        position: absolute;\n                        background-color: var(--background-color, rgb(255,255,255));\n                    }\n                }\n            </style>\n            <div id="app">\n                <app-bar id="header" title="FHIR Browser"></app-bar>\n                <div id="content">\n                    <div>\n                        <div id="leftPanel">\n                            <fhir-server-selector id="serverSelector"></fhir-server-selector>\n                            <fhir-metadata id="metadata"></fhir-metadata>\n                        </div>\n                        <div id="bdy">\n                            <fhir-bundle id="bundle" hidden></fhir-bundle>\n                            <fhir-resource id="resource" hidden></fhir-resource>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\t\t',this._bdy=this._shadow.getElementById("bdy"),this._server=null,this._dialog=null}connectedCallback(){const e=this._shadow.getElementById("leftPanel"),t=this._shadow.getElementById("bundle"),n=this._shadow.getElementById("resource");this._shadow.getElementById("header").addEventListener("navigationClick",(t=>{e.style.display="none"==e.style.display?"flex":"none"})),this._shadow.getElementById("metadata").addEventListener("resourceTypeSelected",(r=>{window.matchMedia("(max-width: 480px)").matches&&(e.style.display="none"),n.hidden=!0,t.hidden=!1,t.load(this._server,r.detail.resourceType)})),n.addEventListener("back",(e=>{n.hidden=!0,t.hidden=!1})),t.addEventListener("resourceSelected",(e=>{t.hidden=!0,n.hidden=!1,n.load({server:this._server,resourceType:e.detail.resourceType,resourceId:e.detail.resourceId})})),this._shadow.getElementById("serverSelector").addEventListener("serverchanged",(e=>{this._server=e.detail.server,t.hidden=!0,n.hidden=!0,this.fetchMetadata().then((e=>{this._server.version=this._schemas[e.fhirVersion],this._server.metadata=e,this._shadow.getElementById("metadata").metadata=e}))}))}async fetchMetadata(){return(await fetch(`${this._server.url}/metadata?_format=json`,{cache:"reload",headers:this._server.headers})).json()}})})()})();